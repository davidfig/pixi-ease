<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>pixi-ease API Documentation</title>
    
    <meta name="description" content="Documentation for pixi-ease library" />
    
        <meta name="keywords" content="docs, documentation, javascript, ease, animate, pixi.js" />
        <meta name="keyword" content="docs, documentation, javascript, ease, animate, pixi.js" />
    
    
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="https://fonts.googleapis.com/css?family=Libre+Franklin:400,700" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/main.css">

    
    <script>
    var config = {"monospaceLinks":false,"cleverLinks":false,"default":{"outputSourceFiles":true},"applicationName":"pixi-ease","footer":"by David Figatner (yopeyopey.com)","copyright":"Copyright Â© 2019 David Figatner","meta":{"title":"pixi-ease API Documentation","description":"Documentation for pixi-ease library","keyword":"docs, documentation, javascript, ease, animate, pixi.js"}};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">pixi-ease</a></h3>
    <button id="menuToggle" class="btn btn-link btn-lg menu-toggle">
        <span class="glyphicon glyphicon-menu-hamburger"></span>
    </button>
    <div class="search">
        <input id="search" type="text" class="form-control input-md" placeholder="Search...">
    </div>
    <ul class="list">
    
        
        <li class="item" data-name="global">
            <span class="title namespace ">
                
                <span class="namespaceTag">
                    <span class="glyphicon glyphicon-globe"></span>
                </span>
                
                <a href="global.html">Global</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent " data-name="ease"><a href="global.html#ease">ease</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        
        <li class="item" data-name="Ease">
            <span class="title  ">
                
                <a href="Ease.html">Ease</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent " data-name="Ease#count"><a href="Ease.html#count">count</a></li>
            
                <li class="parent " data-name="Ease#duration"><a href="Ease.html#duration">duration</a></li>
            
                <li class="parent " data-name="Ease#ease"><a href="Ease.html#ease">ease</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="Ease#add"><a href="Ease.html#add">add</a></li>
            
                <li class="parent  " data-name="Ease#countRunning"><a href="Ease.html#countRunning">countRunning</a></li>
            
                <li class="parent  " data-name="Ease#destroy"><a href="Ease.html#destroy">destroy</a></li>
            
                <li class="  " data-name="Ease#emit~"><a href="Ease.html#emit">emit</a></li>
            
                <li class="  " data-name="Ease#eventNames~"><a href="Ease.html#eventNames">eventNames</a></li>
            
                <li class="parent  " data-name="Ease#face"><a href="Ease.html#face">face</a></li>
            
                <li class="  " data-name="Ease#listenerCount~"><a href="Ease.html#listenerCount">listenerCount</a></li>
            
                <li class="  " data-name="Ease#listeners~"><a href="Ease.html#listeners">listeners</a></li>
            
                <li class="  " data-name="Ease#once~"><a href="Ease.html#once">once</a></li>
            
                <li class="  " data-name="Ease#on~"><a href="Ease.html#on">on</a></li>
            
                <li class="parent  " data-name="Ease#removeAll"><a href="Ease.html#removeAll">removeAll</a></li>
            
                <li class="  " data-name="Ease#removeAllListeners~"><a href="Ease.html#removeAllListeners">removeAllListeners</a></li>
            
                <li class="parent  " data-name="Ease#removeEase"><a href="Ease.html#removeEase">removeEase</a></li>
            
                <li class="  " data-name="Ease#removeListener~"><a href="Ease.html#removeListener">removeListener</a></li>
            
                <li class="parent  " data-name="Ease#target"><a href="Ease.html#target">target</a></li>
            
                <li class="parent  " data-name="Ease#update"><a href="Ease.html#update">update</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            <span class="subtitle">Events</span>
            
                <li class="parent" data-name="Ease#event:complete"><a href="Ease.html#event:complete">complete</a></li>
            
                <li class="parent" data-name="Ease#event:each"><a href="Ease.html#event:each">each</a></li>
            
            </ul>
        </li>
    
        
        <li class="item" data-name="Easing">
            <span class="title  ">
                
                <a href="Easing.html">Easing</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent " data-name="Easing#count"><a href="Easing.html#count">count</a></li>
            
                <li class="parent " data-name="Easing#elements"><a href="Easing.html#elements">elements</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="  " data-name="Easing#emit~"><a href="Easing.html#emit">emit</a></li>
            
                <li class="  " data-name="Easing#eventNames~"><a href="Easing.html#eventNames">eventNames</a></li>
            
                <li class="  " data-name="Easing#listenerCount~"><a href="Easing.html#listenerCount">listenerCount</a></li>
            
                <li class="  " data-name="Easing#listeners~"><a href="Easing.html#listeners">listeners</a></li>
            
                <li class="  " data-name="Easing#once~"><a href="Easing.html#once">once</a></li>
            
                <li class="  " data-name="Easing#on~"><a href="Easing.html#on">on</a></li>
            
                <li class="parent  " data-name="Easing#remove"><a href="Easing.html#remove">remove</a></li>
            
                <li class="  " data-name="Easing#removeAllListeners~"><a href="Easing.html#removeAllListeners">removeAllListeners</a></li>
            
                <li class="  " data-name="Easing#removeListener~"><a href="Easing.html#removeListener">removeListener</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        
    
    </ul>
</div>
    <div class="main">
        
        <h1 class="page-title" data-filename="Ease">Source: src/ease.js</h1>
        
        


    
    <section>
        <header>
            <div class="header content-size">
                <h2>src/ease.js</h2>
            </div>
        </header>
        <article>
            <pre id="source-code" class="prettyprint source "><code>import Penner from 'penner'
import Events from 'eventemitter3'

import { Easing } from './easing'

const easeOptions = {
    duration: 1000,
    ease: Penner.easeInOutSine,
    maxFrame: 1000 / 60,
    ticker: null,
    useRAF: true
}

/**
 * Manages a group of eases
 * @extends EventEmitter
 * @example
 * import * as PIXI from 'pixi.js'
 * import { Ease, ease } from 'pixi-ease'
 *
 * const app = new PIXI.Application()
 * const test = app.stage.addChild(new PIXI.Sprite(PIXI.Texture.WHITE))
 *
 * const move = ease.add(test, { x: 20, y: 15, alpha: 0.25 }, { reverse: true })
 * move.once('complete', () => console.log('move ease complete.'))
 *
 * test.generic = 25
 * const generic = ease.add(test, { generic: 0 }, { duration: 1500, ease: 'easeOutQuad' })
 * generic.on('each', () => console.log(test.generic))
 *
 * const secondEase = new Ease({ duration: 3000, ease: 'easeInBack' })
 * const test2 = app.stage.addChild(new PIXI.Sprite(PIXI.Texture.WHITE))
 * test2.tint = 0x0000ff
 * secondEase.add(test2, { blend: [0xff0000, 0x00ff00], scale: 2 })
 */
export class Ease extends Events
{
    /**
     * @param {object} [options]
     * @param {number} [options.duration=1000] default duration if not set
     * @param {(string|function)} [options.ease=Penner.easeInOutSine] default ease function if not set (see {@link https://www.npmjs.com/package/penner} for names of easing functions)
     * @param {boolean} [option.useRAF=true] attach to a requestAnimationFrame listener
     * @param {PIXI.Ticker} [options.ticker] attach to a PIXI.Ticker instead of RAF
     * @param {number} [options.maxFrame=1000/60] maximum frame time (set to Infinity to ignore); only used if useTicker = true
     * @fires Ease#complete
     * @fires Ease#each
     */
    constructor(options)
    {
        super()
        this.options = Object.assign({}, easeOptions, options)
        this.easings = []
        this.empty = true
        if (this.options.ticker)
        {
            this.options.ticker.add(this.update, this)
        }
    }

    /**
     * removes all eases and tickers
     */
    destroy()
    {
        this.removeAll()
        if (this.options.useTicker)
        {
            this.ticker.remove(this.update, this)
        }
        else if (this.options.useRAF)
        {
            cancelAnimationFrame(this.handleRAF)
            this.handleRAF = null
        }
    }

    /**
     * add ease(s) to a PIXI.DisplayObject element
     * @param {(PIXI.DisplayObject|PIXI.DisplayObject[])} element
     *
     * @param {object} params
     * @param {number} [params.x]
     * @param {number} [params.y]
     * @param {(PIXI.DisplayObject|PIXI.Point)} [params.position] changes both x and y
     * @param {number} [params.width]
     * @param {number} [params.height]
     * @param {number} [params.scale] changes both scale.x and scale.y
     * @param {number} [params.scaleX]
     * @param {number} [params.scaleY]
     * @param {number} [params.alpha]
     * @param {number} [params.rotation]
     * @param {(PIXI.DisplayObject|PIXI.Point)} [params.face] rotate the element to face a DisplayObject using the closest angle
     * @param {number} [params.skew] changes both skew.x and skew.y
     * @param {number} [params.skewX]
     * @param {number} [params.skewY]
     * @param {(number|number[])} [params.tint] cycle through colors - if number is provided then it cycles between current tint and number; if number[] is provided is cycles only between tints in the number[]
     * @param {(number|number[])} [params.blend] blend between colors - if number is provided then it blends current tint to number; if number[] is provided then it blends between the tints in the number[]
     * @param {number} [params.shake] shakes the object by this number (randomly placing the element +/-shake pixels away from starting point)
     * @param {number} [params.*] generic number parameter
     *
     * @param {object} [options]
     * @param {number} [options.duration]
     * @param {(string|function)} [options.ease]
     * @param {(boolean|number)} [options.repeat]
     * @param {boolean} [options.reverse]
     * @param {number} [options.wait] wait this number of milliseconds before ease starts
     *
     * @returns {Easing}
     */
    add(element, params, options)
    {
        options = options || {}
        options.duration = typeof options.duration !== 'undefined' ? options.duration : this.options.duration
        options.ease = options.ease || this.options.ease
        if (typeof options.ease === 'string')
        {
            options.ease = Penner[options.ease]
        }
        const easing = new Easing(element, params, options)
        this.easings.push(easing)
        if (this.empty &amp;&amp; this.options.useRAF)
        {
            this.handleRAF = requestAnimationFrame(() => this.update())
            this.lastTime = Date.now()
        }
        this.empty = false
        return easing
    }

    /**
     * create an ease that changes position (x, y) of the element by moving to the target at the speed
     * NOTE: under the hood this calls add(element, { x, y }, { duration: &lt;calculated speed based on distance and speed> })
     * @param {PIXI.DisplayObject} element
     * @param {(PIXI.DisplayObject|PIXI.Point)} target
     * @param {number} speed in pixels / ms
     *
     * @param {object} [options]
     * @param {(string|function)} [options.ease]
     * @param {(boolean|number)} [options.repeat]
     * @param {boolean} [options.reverse]
     * @param {number} [options.wait] wait this number of milliseconds before ease starts
     * @param {boolean} [options.removeExisting] removes existing eases on the element of the same type (including x,y/position, skewX,skewY/skew, scaleX,scaleY/scale)
     *
     * @returns {Easing}
     */
    target(element, target, speed, options)
    {
        const duration = Math.sqrt(Math.pow(element.x - target.x, 2) + Math.pow(element.y - target.y, 2)) / speed
        options = options || {}
        options.duration = duration
        return this.add(element, { x: target.x, y: target.y }, options)
    }

    /**
     * helper function to add an ease that changes rotation to face the element at the desired target using the speed
     * NOTE: under the hood this calls add(element {x, y }, { duration: &lt;calculated speed based on shortest rotation and speed> })
     * @param {PIXI.DisplayObject} element
     * @param {(PIXI.DisplayObject|PIXI.Point)} target
     * @param {number} speed in radians / ms
     *
     * @param {object} [options]
     * @param {(string|function)} [options.ease]
     * @param {(boolean|number)} [options.repeat]
     * @param {boolean} [options.reverse]
     * @param {number} [options.wait] wait this number of milliseconds before ease starts
     *
     * @returns {Easing}
     */
    face(element, target, speed, options)
    {
        const shortestAngle = Easing.shortestAngle(element.rotation, Math.atan2(target.y - element.y, target.x - element.x))
        const duration = Math.abs(shortestAngle - element.rotation) / speed
        options = options || {}
        options.duration = duration
        return this.add(element, { rotation: shortestAngle }, options)
    }

    /**
     * removes one or more eases from a DisplayObject
     * WARNING: 'complete' events will not fire for these removals
     * @param {PIXI.DisplayObject} element
     * @param {(string|string[])} [param] omit to remove all easings for an element
     */
    removeEase(element, param)
    {
        for (let i = 0; i &lt; this.easings.length; i++)
        {
            if (this.easings[i].remove(element, param))
            {
                this.easings.splice(i, 1)
                i--
            }
        }
        if (this.easings.length === 0)
        {
            this.empty = true
            if (this.options.useRAF &amp;&amp; this.handleRAF)
            {
                cancelAnimationFrame(this.handleRAF)
                this.handleRAF = null
            }
        }
    }

    /**
     * remove all easings
     * WARNING: 'complete' events will not fire for these removals
     */
    removeAll()
    {
        this.easings = []
        this.empty = true
        if (this.options.useRAF &amp;&amp; this.handleRAF)
        {
            cancelAnimationFrame(this.handleRAF)
            this.handleRAF = null
        }
}

    /**
     * update frame; this is called automatically if options.useTicker !== false
     * @param {number} elapsed time in ms since last frame
     */
    update(elapsed)
    {
        if (this.options.useTicker)
        {
            elapsed = this.ticker.elapsedMS
        }
        else if (this.options.useRAF)
        {
            const now = Date.now()
            elapsed = now - this.lastTime
            this.lastTime = now
        }
        elapsed = Math.min(elapsed, this.options.maxFrame)
        if (!this.empty)
        {
            const list = this.easings.slice(0)
            for (let easing of list)
            {
                if (easing.update(elapsed))
                {
                    this.easings.splice(this.easings.indexOf(easing), 1)
                }
            }
            this.emit('each', this)
            if (this.easings.length === 0)
            {
                this.empty = true
                this.emit('complete', this)
            }
        }
        if (this.options.useRAF &amp;&amp; this.easings.length)
        {
            this.handleRAF = requestAnimationFrame(() => this.update())
        }
        else
        {
            this.handleRAF = null
        }
    }

    /**
     * number of easings
     * @type {number}
     */
    get count()
    {
        return this.easings.length
    }

    /**
     * number of active easings across all elements
     * @returns {number}
     */
    countRunning()
    {
        let count = 0
        for (let entry of this.easings)
        {
            count += entry.count
        }
        return count
    }

    /**
     * default duration for eases.add() (only applies to newly added eases)
     * @type {number}
     */
    set duration(duration)
    {
        this.options.duration = duration
    }
    get duration()
    {
        return this.options.duration
    }

    /**
     * default ease for eases.add() (only applies to newly added eases)
     * @type {(string|Function)}
     */
    set ease(ease)
    {
        this.options.ease = ease
    }
    get ease()
    {
        return this.options.ease
    }
}

// manages the ids used to define the DisplayObject ease variable (enabled multiple eases attached to the same object)
Ease.id = 0

/**
 * default instantiated Ease class
 * @type {Ease}
 */
export let ease = new Ease()

Ease.ease = ease

export class List
{
    constructor()
    {
        console.warn('Ease.List was deprecated. Use new Ease() instead.')
    }
}

/**
 * fires when there are no more eases
 * @event Ease#complete
 * @type {Ease}
 */

 /**
 * fires on each loop when there are eases running
 * @event Ease#each
 * @type {Ease}
 */</code></pre>
        </article>
    </section>






        

        <footer class="content-size">
            <div class="footer">
                Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> on Thu May 28 2020 21:00:52 GMT+0800 (Taipei Standard Time)
            </div>
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/main.js"></script>
</body>
</html>
